System.register("chunks:///_virtual/block.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts"],(function(t){"use strict";var e,i,c,n,o,s,a;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,c=t._decorator,n=t.Node,o=t.Component},function(t){s=t.Constants,a=t.BLOCK_TYPE}],execute:function(){var l;i._RF.push({},"cba2cge8A5HFpQaqH8psE+f","block",void 0);var r=c.ccclass;t("block",r("block")(l=function(t){function i(){for(var e,i=arguments.length,c=new Array(i),n=0;n<i;n++)c[n]=arguments[n];return(e=t.call.apply(t,[this].concat(c))||this)._blockType=a.WHITE,e}e(i,t);var c=i.prototype;return c.start=function(){this.node.on(n.EventType.TOUCH_START,this.onClick,this)},c.onClick=function(){if(s.Game.isPlaying()&&s.Game.isTheFrontGroup(this.node.parent.uuid)){var t,e=((t={})[a.BLACK]=this.clickBlack.bind(this),t[a.WHITE]=this.clickWhite.bind(this),t);e[this._blockType]&&e[this._blockType]()}},c.clickBlack=function(){this.setBlockType(a.GRAY),s.Game.node.emit(s.EVENT_CLICK_BLACK,this.node.parent.uuid)},c.clickWhite=function(){this.setBlockType(a.RED),s.Game.gameOver()},c.setBlockType=function(t){this._blockType=t,this.node.children.forEach((function(t){t.active=!1})),this.node.getChildByName(t).active=!0},i}(o))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/constants.ts",["cc"],(function(t){"use strict";var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){var E,c;t("BLOCK_TYPE",void 0),n._RF.push({},"d6292PaSplDPo4X1Bx0U+0F","constants",void 0),function(t){t[t.READY=1]="READY",t[t.PLAYING=2]="PLAYING",t[t.PAUSE=3]="PAUSE",t[t.OVER=4]="OVER"}(E||(E={})),function(t){t.WHITE="white",t.BLACK="black",t.GRAY="gray",t.RED="red"}(c||(c=t("BLOCK_TYPE",{})));var e=t("Constants",(function(){}));e.Game=void 0,e.Management=void 0,e.BLOCK_WIDTH=187.5,e.BLOCK_HEIGHT=280,e.SPEED=500,e.ACCELERATION=10,e.GAME_STATE=E,e.EVENT_CLICK_BLACK="clickBlack",e.EVENT_GROUP_DESTROY="groupDestroy",n._RF.pop()}}}));

System.register("chunks:///_virtual/game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts","./group.ts","./menu.ts"],(function(t){"use strict";var e,n,i,o,r,a,s,u,l,c,p,g,f,h,d,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Node,u=t.Prefab,l=t.Label,c=t.instantiate,p=t.director,g=t.Vec3,f=t.Component},function(t){h=t.Constants},function(t){d=t.group},function(t){m=t.menu}],execute:function(){var E,v,T,A,y,b,G,P,_;r._RF.push({},"6f6e1Wj3MdD55L99NYOXKn6","game",void 0);var S=a.ccclass,C=a.property;t("game",(E=S("game"),v=C(s),T=C(u),A=C(l),E((G=e((b=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"panel",G,o(e)),i(e,"group",P,o(e)),i(e,"score",_,o(e)),e.state=h.GAME_STATE.READY,e.speed=h.SPEED,e}n(e,t);var r=e.prototype;return r.start=function(){h.Game=this,console.log("game start"),this.init()},r.init=function(){for(var t=0;t<8;t++)this.generateBlock(-375,667+h.BLOCK_HEIGHT*t);this.node.on(h.EVENT_GROUP_DESTROY,this.generateBlock.bind(this),this),this.gameStart()},r.generateBlock=function(t,e){if(void 0===t&&(t=-375),!e){var n,i=this.panel.children.length;if(i)e=(null==(n=this.panel.children[i-1])?void 0:n.getPosition().clone().y)+h.BLOCK_HEIGHT}var o=c(this.group);o.getComponent(d).init(),o.setPosition(t,e),this.panel.addChild(o)},r.isTheFrontGroup=function(t){var e=this.panel.children.find((function(t){return t.getComponent(d).blackNum>0}));return console.log(null==e?void 0:e.uuid,t),(null==e?void 0:e.uuid)===t},r.isPlaying=function(){return h.Game.state===h.GAME_STATE.PLAYING},r.gameStart=function(){this.state=h.GAME_STATE.PLAYING},r.gamePause=function(){this.state=h.GAME_STATE.PAUSE},r.gameOver=function(){this.state=h.GAME_STATE.OVER;var t=this.score.string;setTimeout((function(){p.loadScene("menu",(function(e,n){n.getChildByName("menuManagement").getComponent(m).enterOver(t)}))}),500)},r.update=function(t){this.isPlaying()&&(this.panel.translate(new g(0,-t*this.speed)),this.speed+=t*h.ACCELERATION)},e}(f)).prototype,"panel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(b.prototype,"group",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(b.prototype,"score",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=b))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/group.ts",["./rollupPluginModLoBabelHelpers.js","cc","./block.ts","./constants.ts"],(function(t){"use strict";var n,o,i,e,c,s,r;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator,e=t.Component},function(t){c=t.block},function(t){s=t.BLOCK_TYPE,r=t.Constants}],execute:function(){var a;o._RF.push({},"b1a8b1smJBI+pjsrHZUzMPk","group",void 0);var u=i.ccclass;i.property,t("group",u("group")(a=function(t){function o(){for(var n,o=arguments.length,i=new Array(o),e=0;e<o;e++)i[e]=arguments[e];return(n=t.call.apply(t,[this].concat(i))||this).blackNum=0,n}n(o,t);var i=o.prototype;return i.init=function(){this.blackNum++;var t=Math.floor(4*Math.random());this.node.children[t].getComponent(c).setBlockType(s.BLACK),r.Game.node.on(r.EVENT_CLICK_BLACK,this.clickBlack.bind(this),this)},i.clickBlack=function(t){t===this.node.uuid&&this.blackNum--},i.onDestroy=function(){var t;null==(t=r.Game.node)||t.off(r.EVENT_CLICK_BLACK,this.clickBlack.bind(this),this)},i.update=function(t){if(r.Game.isPlaying()){var n=this.node.getWorldPosition().y;n<-200&&(this.blackNum>0&&r.Game.gameOver(),n<-300&&(this.node.destroy(),r.Game.node.emit(r.EVENT_GROUP_DESTROY)))}},o}(e))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./constants.ts","./block.ts","./game.ts","./group.ts","./management.ts","./menu.ts","./score.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/management.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts"],(function(t){"use strict";var n,e,a,r,o;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,a=t._decorator,r=t.Component},function(t){o=t.Constants}],execute:function(){var c;e._RF.push({},"d20edmILKZA8pgxIuzN7tuY","management",void 0);var s=a.ccclass;a.property,t("management",s("management")(c=function(t){function e(){for(var n,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return(n=t.call.apply(t,[this].concat(a))||this).state=o.GAME_STATE.READY,n}n(e,t);var a=e.prototype;return a.start=function(){o.Management=this},a.update=function(t){},e}(r))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/menu.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,r,i,o,a,u,c,l,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,u=e.Node,c=e.Label,l=e.director,s=e.Component}],execute:function(){var p,f,v,h,m,b,y,d,g,w,z;o._RF.push({},"aaff0KdrhxJvK1wdT3q6QCX","menu",void 0);var T=a.ccclass,_=a.property;e("menu",(p=T("menu"),f=_(u),v=_(u),h=_(u),m=_(c),p((d=t((y=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"startBtn",d,i(t)),r(t,"menu",g,i(t)),r(t,"over",w,i(t)),r(t,"score",z,i(t)),t}n(t,e);var o=t.prototype;return o.start=function(){this.startBtn.on(u.EventType.TOUCH_START,this.startGame.bind(this),this)},o.enterMenu=function(){this.menu.active=!0,this.over.active=!1},o.enterOver=function(e){void 0===e&&(e=""),console.log("分数",e),this.menu.active=!1,this.over.active=!0,this.score.string=e},o.startGame=function(){l.loadScene("main")},t}(s)).prototype,"startBtn",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(y.prototype,"menu",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(y.prototype,"over",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(y.prototype,"score",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=y))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/score.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts"],(function(t){"use strict";var r,e,n,o,i,s,c,a,u;return{setters:[function(t){r=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,s=t._decorator,c=t.Label,a=t.Component},function(t){u=t.Constants}],execute:function(){var l,p,f,h,y;i._RF.push({},"82bfaFP81ROLq8UyyDF3hQb","score",void 0);var d=s.ccclass,b=s.property;t("score",(l=d("score"),p=b(c),l((y=r((h=function(t){function r(){for(var r,e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return r=t.call.apply(t,[this].concat(i))||this,n(r,"score",y,o(r)),r}e(r,t);var i=r.prototype;return i.start=function(){u.Game.node.on(u.EVENT_CLICK_BLACK,this.addScore,this)},i.addScore=function(){this.score.string=String(Number(this.score.string)+1)},i.onDestroy=function(){},r}(a)).prototype,"score",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=h))||f));i._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});